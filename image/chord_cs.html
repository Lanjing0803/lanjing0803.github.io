<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chord Diagram</title>

<style>
    .chart-wrapper {
        width: 100%;
        position: relative;
  
    }
    .entity {
    cursor: pointer;
}
body{          margin: 0; color: rgb(101, 96, 98);
        font-family:'Kanit'}
    #tooltip {
        position: absolute;
        width: auto;
        height: auto;
        padding: 10px;
        text-align: center;
        background-color: rgba(0,0, 0, 0.8);
        color: #F5F9FC;
        border-radius: 4px;
        pointer-events: none;
        font-size: 12px;

    }
    #tooltip.hidden {
        display: none;
    }
    #newInputBox {
  height: 30px;
  width: 10px;
}
.annotation-note-label {
  font-size: 11px;
  color:rgb(101, 96, 98);
  font-weight:400;
}
p{font-size:11px;line-height:1em}
#defaultAnnotation{position: absolute;left:808px;top:188px;padding:10px;}
.line-container {
  position: relative;padding-top:20px;
transform:scale(0.8);left:-18px
}
svg{width:90vw;height:620px}
.line {
  width: 250px;
  height: 1px; 
  background-color: gray;
  position: relative;
  display:flex;
  flex-direction: row;
}
.row{ position: relative;
  display:flex;
  flex-direction: row;gap:5px
}
.tick { font-size: 11px;    line-height: 2;
  bottom: 10px; 
  width:33px;color:gray
}
h3{font-weight:600;margin-top:-50px;font-size:18px;width:230px;padding-left:8px}
h5{margin-bottom:0}

</style>
</head>
<body>
<!-- HTML structure for the chart -->
<div class="chart-wrapper" id="chord">
    <div id="tooltip" class="hidden"></div>
</div>
<div id="defaultAnnotation" class="default-annotation">
  <p style="    margin-left: -80px;
  padding-bottom: 116px;
  font-size: 15px;
  margin-top: -166px;">Hover to explore each disorder!</p>

  <div style="    margin-top: -115px;
  margin-left: -80px;
  padding-bottom: 100px;"><img width="38" height="38" src="https://img.icons8.com/cotton/64/descent-arrow.png" alt="descent-arrow" ></div>
<br><br><br><br><br><br><br>
<h5 style="padding-left:8px">How to Read Symbols</h5>

  <p ><span style="font-size: 1em;padding-left:10px">★</span>  > 0.5 Cosine similarity</p>
  <p ><span style="font-size: 1em;padding-left:10px;position: relative;">&nbsp;&#x2022;</span>&nbsp;&nbsp;  ≥ 0.2 Cosine similarity</p>
    


 <div class="line-container">
  <div class="line">
    <div style="    margin-top: -28px;"><p>Weak</p></div>
    <div style="    margin-top: -28px;
    padding-left: 183px;"><p>Strong</p></div>

  </div>
      <div class="line">
        <div class="tick">0.0</div>
        <div class="tick">0.1</div>
        <div class="tick">0.2</div>
        <div class="tick">0.3</div>
        <div class="tick">0.4</div>
        <div class="tick">0.5</div>
        <div class="tick">0.6</div>
        <div class="tick">0.7</div>
        <div class="tick">0.8</div>
        <div class="tick">0.9</div>
        <div class="tick">1.0</div>
      </div>
      <div class="line" style="height:0;bottom:-15px;left:3px">
        <div class="tick" >&#x58;</div>
        <div class="tick" >&#x58;</div>
        <div class="tick" >&#x2022;</div>
        <div class="tick">&#x2022;</div>
        <div class="tick">&#x2022;</div>
        <div class="tick">&#x2022;</div>
        <div class="tick">&#x2605;</div>
        <div class="tick">&#x2605;</div>
        <div class="tick">&#x2605;</div>
        <div class="tick">&#x2605;</div>
        <div class="tick" >&#x2605;</div>
      </div>
    </div>

    <p style="font-size:15px;text-align:end;padding-top:43px">Source from: <a target="_blank" style=" color: #97a9bd;text-decoration: none;"
      href="https://www.samhsa.gov/">SAMHSA</a>
</p>

   </div>
  




<!-- Include D3.js and jQuery -->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>

<script>


// Based on https://bl.ocks.org/nbremer/1527c2dd26a26d9ee942
var matrix = [];

var alertCount=100,
  emptyPerc = 3,
  emptyStroke = Math.round(alertCount * emptyPerc),
  data = {
    "names": [
    "⊙ ADHD",	"✪ Alcohol",	"⊙ Anxiety",	"⊙ Bipolar",	"⊙ Conduct",	"⊙ Delirium",	"⊙ Depressive",	"⊙ ODD",	"⊙ Other",	"⊙ PDD",	"⊙ Personality",	"✪ Schizophrenia","⊙ Trauma","", "15-17 years",	"18-20 years",	"21-24 years",	"25-29 years",	"30-34 years ",	"35-39 years ",	"40-44 years ",	"45-49 years ",	"50-54 years",	"55-59 years",	"60-64 years",	"65 years and older",	"Special education",	"0-8 grade",	"9-11 grade",	"12 grade (GED)",	"More than 12 grade",	"Full-time",	"Part-time",	"Employed full-time/part-time not differentiated",	"Unemployed",	"Not in labor force",	"Mexican",	"Puerto Rican",	"Other Hispanic or Latino origin",	"Not of Hispanic or Latino origin",	"Male",	"Female",	"Homeless",	"Private residence",	"Other residence",	"Never married",	"Now married",	"Separated (marital status)",	"Divorced, widowed",	"American Indian/Alaska Native",	"Asian",	"Black or African American",	"Native Hawaiian or Other",	"White",	"Other race/two or more races",	"Other jurisdictions",	"Northeast region",	"Midwest region",	"South region",	"West region",	""		
    ],
    "matrix": [
    [0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	7.476,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	2.312,	5.432,	0,	6.968,	3.102,	0,	0,	0,	5.622,	0,	0,	0,	0,	2.302,	2.302,	0,	0,	0,	8.648,	3.174,	0,	3.57,	0,	0,	2.594,	0,	2.248,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	14.822,	0,	4.138,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	3.036,	14.856,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	7.306,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	5.66,	0,	2.972,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	5.582,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	2.438,	0,	0,	0,	0,	0,	0,	0,	2.232,	0,	0,	0,	0,	2.36,	0,	0,	0,	2.256,	2.414,	0,	0,	0,	0,	2.01,	2.01,	0,	0,	0,	8.092,	0,	0,	6.872,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	7.42,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	4.33,	5.132,	3.27,	2.938,	0,	0,	0,	5.244,	0,	0,	0,	0,	0,	0,	0,	0,	0,	6.894,	2.81,	0,	2.544,	0,	0,	3.206,	0,	2.136,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	7.994,	0,	2.64,	0,	0,	0,	0,	0,	0,	0,	3.178,	0,	0,	0,	0,	3.634,	3.634,	0,	0,	0,	7.85,	0,	0,	4.93,	0,	2.42,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	7.2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	5.972,	0,	3.002,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	5.634,	0,	0,	2.258,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	4.044,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	3.354,	2.19,	0,	0,	0,	3.01,	6.158,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	2.536,	3.366,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	3.238,	0,	0,	0,	5.246,	3.358,	0,	0,	0,	3.682,	0,	0,	0,	0,	0,	0,	0,	0,	2.822,	6.396,	3.038,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	3.236,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	7.902,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	2.038,	7.022,	0,	3.332,	0,	2.844,	0,	0,	2.56,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	2.31,	0,	0,	0,	0,	0,	0,	0,	2.318,	0,	0,	0,	0,	0,	0,	0,	0,	0,	3.456,	0,	0,	0,	0,	0,	0,	0,	0,	0,	6.388,	0,	0,	7.3,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	13.122,	0,	3.198,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	4.94,	12.196,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	7.752,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	6.13,	0,	3.732,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	6.706,	0,	0,	2.85,	0,	0,	0,	0,	2.082,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	emptyStroke],									
	[37.38,	0,	36.53,	0,	37.1,	0,	36,	20.22,	0,	39.51,	0,	0,	38.76,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	12.19,	0,	0,	0,	0,	0,	0,	11.55,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	11.16,	0,	39.97,	0,	0,	0,	0,	11.59,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	16.19,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[11.56,	0,	0,	0,	0,	13.2,	0,	0,	0,	10.19,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[27.16,	0,	28.3,	0,	21.65,	0,	29.86,	0,	0,	35.11,	0,	0,	30.65,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	25.66,	0,	0,	16.77,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[34.84,	0,	14.86,	11.8,	16.35,	0,	15.01,	10.95,	26.23,	16.66,	0,	0,	18.66,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[15.51,	0,	0,	0,	14.69,	0,	0,	0,	16.79,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	14.22,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	11.28,	0,	0,	0,	15.05,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[28.11,	0,	0,	12.07,	26.22,	15.89,	0,	30.79,	18.41,	12.8,	17.28,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	74.11,	0,	0,	0,	0,	0,	0,	0,	0,	0,	65.61,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	20.69,	0,	0,	0,	0,	0,	0,	0,	0,	0,	15.99,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[11.51,	0,	0,	10.05,	0,	18.17,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[11.51,	0,	0,	10.05,	0,	18.17,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	14.11,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[43.24,	0,	27.91,	40.46,	34.47,	39.25,	28.17,	0,	31.98,	0,	31.94,	0,	33.53,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[15.87,	0,	0,	0,	14.05,	0,	0,	0,	15.19,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[17.85,	0,	0,	34.36,	12.72,	24.65,	11.29,	0,	0,	0,	36.5,	0,	14.25,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	12.1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[12.97,	0,	0,	0,	16.03,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[11.24,	0,	0,	0,	10.68,	0,	0,	0,	0,	0,	0,	0,	10.41,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	15.18,	0,	0,	0,	0,	0,	0,	0,	0,	0,	24.7,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	74.28,	0,	0,	0,	0,	0,	0,	0,	0,	0,	60.98,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	12.68,	16.18,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	16.83,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
	[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	emptyStroke,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],									
],
    "colors": ["rgb(89, 40, 237)", "#4073ff", "#96C3EB", "#14AAF5", "#158FAD","#6ACCBC", "#299438", "#7ECC49", "#AFB83B", "#FAD000", "#FF9933", "#DB4035","#B8255F","transparent",
     "#918a89",	  "#918a89",	  "#918a89",	 "#918a89",	 "#918a89",	 "#918a89",	 "#918a89",	 "#918a89",	 "#918a89",	 "#918a89",	 "#918a89",	 "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	  "#918a89",	"transparent"],
    "empty": emptyStroke,
    "count": alertCount,
    "graph": "#chord"
  };

var $graph = $(data.graph);

var Names = data.names,
  Matrix = data.matrix,
  Colors = data.colors,
  emptyStroke = data.empty;

var wrapperWidth = 1000,
  width = wrapperWidth,
  height = wrapperWidth * 0.7;

var svg = d3.select(data.graph).append("svg")
  .attr("width", (width))
  .attr("height", (height))
  .attr("xmlns", "http://www.w3.org/2000/svg")
  .attr("xlink", "http://www.w3.org/1999/xlink");

var outerRadius = wrapperWidth / 3.5 - 98,
  innerRadius = outerRadius-3,
  opacityDefault = 0.3,
  opacityLower = 0.03,
  opacityLowest = 0.03, 
  opacityFull = 1;

var offset = Math.PI * (emptyStroke / (data.count + emptyStroke)) /2.3;

var chord = d3.chord()
  .padAngle(0.04)
  .sortSubgroups(d3.descending) 
  .sortChords(d3.descending);

var arc = d3.arc()
  .innerRadius(innerRadius)
  .outerRadius(outerRadius)
  .startAngle(startAngle)
  .endAngle(endAngle);

var ribbon = d3.ribbon()
  .radius(innerRadius)
  .startAngle(startAngle)
  .endAngle(endAngle);

var fill = d3.scaleOrdinal()
  .domain(d3.range(Names.length))
  .range(Colors);

var wrapper = svg.append("g")
  .attr("class", "chordWrapper")
  .attr("transform", "translate(" + wrapperWidth / 2 + "," + height / 2 + ")")
  .datum(chord(Matrix));

////////////////////////////////////////////////////////////
////////////////////// Entities ////////////////////////////
////////////////////////////////////////////////////////////
var entity = wrapper.selectAll(".entity")
  .data(function(chords) {
    return chords.groups;
  })
  .enter().append("g")
  .attr("class", "entity")
  .on("mouseover", function(d) {

    wrapper.selectAll(".entity")
  .transition()
  .style("opacity", function(e) {
    if (e === d) {
      return opacityFull;
    } else {
      var linkedToHovered = false;
      wrapper.selectAll(".chord").each(function(c) {
        if ((c.source.index === d.index && c.target.index === e.index) || (c.source.index === e.index && c.target.index === d.index)) {
          linkedToHovered = true;
        }
      });
      return linkedToHovered ? opacityFull : opacityLower;
    }
  });
    wrapper.selectAll(".chord")
      .transition()
      
      .style("opacity", function(e) {
        // Set full opacity for the related chord, lowest opacity for others
        return (e.source.index === d.index || e.target.index === d.index) ? opacityDefault : opacityLower; 
      });


    const entityName = Names[d.index];
    
    var annotations = [];
    if (entityName === '✪ Alcohol') {
      annotations.push(
        {color: "#4073ff",
        note: {title: "Alcohol Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "1. Region : Other jurisdictions ★ ", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Ethnic : Puerto Rican ★",align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Ethnic : Not of Hispanic or Latino origin •",align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }
      
      );
    }
    if (entityName === '⊙ ADHD') {
      annotations.push(
        {color: "rgb(89, 40, 237)",
        note: {title: "ADHD Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "1. Marital status : Never married •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Age : 15-17 years •",align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Education : More than 12 grade •",align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "4. Employment : Not in labor force •",align: "left"},
        x: 830,
          y: 323,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "5. Education : 9-11 grade •",align: "left"},
        x: 830,
     y: 343,
        dy: 0, dx: 0,
        connector: null,  
      }
      );
    }

    if (entityName === '⊙ Anxiety') {
      annotations.push(
        {color: "#96C3EB",
        note: {title: "Anxiety Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,
      },
      {
        note: {label: "1. Age : 15-17 years •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Education : 9-11 grade •",align: "left"},
                x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Marital status : Never married •", align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }
      );
    }

    if (entityName === '⊙ Bipolar') {
      annotations.push(
        {
       color: "#14AAF5", note: {title: "Bipolar Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
          note: {label: "1. Marital status : Never married •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Marital status : Divorced, widowed •", align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }
      ); }

      if (entityName === '⊙ Conduct') {
      annotations.push(
        {
       color: "#158FAD", note: {title: "Conduct Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {note: {label: "1. Age : 15-17 years •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Marital status : Never married •", align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Employment : Not in labor force •",align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "4. Education : 12 grade (GED) •",align: "left"},
        x: 830,
          y: 323,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "5. Education : 9-11 grade •",align: "left"},
        x: 830,
     y: 343,
        dy: 0, dx: 0,
        connector: null,  
      },

      ); }

      if (entityName === '⊙ Delirium') {
      annotations.push(
        {
       color: "#6ACCBC", note: {title: "Delirium Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {note: {label: "1. Age : 65 years and older •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Marital status : Never married •", align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      { note: {label: "3. Marital status : Divorced, widowed •", align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Depressive') {
      annotations.push(
        {
       color: "#299438", note: {title: "1. Depressive Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
        note: {label: "2. Age : 15-17 years •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Education : 9-11 grade •",align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "4. Marital status : Never married •", align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ ODD') {
      annotations.push(
        {
       color: "#7ECC49", note: {title: "ODD Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
        note: {label: "1. Employment : Not in labor force •",align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {note: {label: "2. Age : 15-17 years •", align: "left"},
   x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Other') {
      annotations.push(
        {
       color: "#AFB83B", note: {title: "Other Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
        note: {label: "1. Marital status : Never married •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
         note: {label: "2. Education : More than 12 grade •",align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ PDD') {
      annotations.push(
        {
       color: "#FAD000", note: {title: "PDD Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {note: {label: "1. Age : 15-17 years •", align: "left"},
 x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Education : 9-11 grade •",align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Personality') {
      annotations.push(
        {
       color: "#FF9933",  note: {title: "Personality Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {        
        note: {label: "1. Marital status : Divorced, widowed •", align: "left"},
 x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Marital status : Never married •", align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '✪ Schizophrenia') {
      annotations.push(
        {
       color: "#DB4035",  note: {title: "Schizophrenia Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {        
        note: {label: "1. Ethnic : Puerto Rican ★",align: "left"},
 x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Region : Other jurisdictions ★ ", align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }, {note: {label: "3. Race : Other race/two or more races •", align: "left"},
   x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Trauma') {
      annotations.push(
        {
       color: "#B8255F",  note: {title: "Trauma Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {        
        note: {label: "1. Age : 15-17 years •", align: "left"},
       x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Marital status : Never married •", align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }, { note: {label: "3. Education : 9-11 grade •",align: "left"},
   x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }

    const makeAnnotations = d3.annotation()
      .annotations(annotations)
    .type(d3.annotationLabel)
    .textWrap(300); 
  

    d3.select(".annotations").remove(); 
    svg.append("g")
      .attr("class", "annotations")
      .call(makeAnnotations);
  })
  .on("mouseout", function() {
    d3.select(".annotations").remove();
    wrapper.selectAll(".chord")
      .transition()
      .style("opacity", opacityDefault);
      wrapper.selectAll(".entity")
      .transition()
      .style("opacity", opacityFull);

  });

// Add text
entity.append("text")
  .each(function(d) {
    d.angle = ((d.startAngle + d.endAngle) / 2) + offset;
  })
  .style("fill", function(d, i) {
    return data.colors[i]; 
  })
  .attr("font-size", "11px")
  .attr("class", "titles")
  .attr("text-anchor", function(d) {
    return d.angle > Math.PI ? "end" : null;
  })
  .attr("transform", function(d, i) {
    var c = arc.centroid(d);
    return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")" + "translate(" + (innerRadius + 18) + ")" + (d.angle > Math.PI ? "rotate(180)" : "");
  })
  .text(function(d, i) {
    return Names[i];
  });

// Draw each entity
entity.append("path")
  .style("fill", function(d) {
    return fill(d.index);
  })
  .style("stroke", "none")
  .style("pointer-events", function(d, i) {
    return (Names[i] === "" ? "none" : "auto");
  })
  .attr("d", arc);


  ////////////////////////////////////////////////////////////
////////////////////// Chords //////////////////////////////
////////////////////////////////////////////////////////////
var flow = wrapper.selectAll('.chord')
  .data(function(chords) {
    return chords;
  })
  .enter().append("path")
  .attr("class", "chord")
  .attr("d", ribbon)
  .style("fill", function(d) {
    return fill(d.target.index);
  })
  .style("opacity", opacityDefault)
  .style("stroke", "none")
  .on("mouseover", function(d) {

    var coordinates = [0, 0];
    coordinates = d3.mouse(svg.node());
    var x = coordinates[0];
    var y = coordinates[1];

    d3.select("#tooltip")
      .style("left", (x - 20) + "px")
      .style("top", (y +20)+"px")
      .text(function() {
    if (d.target.index !== undefined && Names[d.target.index] !== "") {
      return [(Math.round(d.source.value / 10) / 10).toFixed(2), " cosine similarity between ", Names[d.target.index], " and ", Names[d.source.index]].join("");
    } else {
      return ""; 
    }
   });
   if (d.target.index !== undefined && Names[d.target.index] !== "") {
  d3.select("#tooltip").classed("hidden", false);
} else {
  d3.select("#tooltip").classed("hidden", true);
}

d3.selectAll('path.chord').transition("fadeOnArc")
  .style("opacity", opacityLowest);
d3.select(this).transition("fadeOnArc")
  .style("opacity", opacityDefault);



    const entityName = Names[d.target.index];
    
    var annotations = [];
    if (entityName === '✪ Alcohol') {
      annotations.push(
        {color: "#4073ff",
        note: {title: "Alcohol Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "1. Region : Other jurisdictions ★ ", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Ethnic : Puerto Rican ★",align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Ethnic : Not of Hispanic or Latino origin •",align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }
      
      );
    }
    if (entityName === '⊙ ADHD') {
      annotations.push(
        {color: "rgb(89, 40, 237)",
        note: {title: "ADHD Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "1. Marital status : Never married •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Age : 15-17 years •",align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Education : More than 12 grade •",align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "4. Employment : Not in labor force •",align: "left"},
        x: 830,
          y: 323,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "5. Education : 9-11 grade •",align: "left"},
        x: 830,
     y: 343,
        dy: 0, dx: 0,
        connector: null,  
      }
      );
    }

    if (entityName === '⊙ Anxiety') {
      annotations.push(
        {color: "#96C3EB",
        note: {title: "Anxiety Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,
      },
      {
        note: {label: "1. Age : 15-17 years •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Education : 9-11 grade •",align: "left"},
                x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Marital status : Never married •", align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }
      );
    }

    if (entityName === '⊙ Bipolar') {
      annotations.push(
        {
       color: "#14AAF5", note: {title: "Bipolar Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
          note: {label: "1. Marital status : Never married •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Marital status : Divorced, widowed •", align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }
      ); }

      if (entityName === '⊙ Conduct') {
      annotations.push(
        {
       color: "#158FAD", note: {title: "Conduct Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {note: {label: "1. Age : 15-17 years •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Marital status : Never married •", align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Employment : Not in labor force •",align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "4. Education : 12 grade (GED) •",align: "left"},
        x: 830,
          y: 323,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "5. Education : 9-11 grade •",align: "left"},
        x: 830,
     y: 343,
        dy: 0, dx: 0,
        connector: null,  
      },

      ); }

      if (entityName === '⊙ Delirium') {
      annotations.push(
        {
       color: "#6ACCBC", note: {title: "Delirium Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {note: {label: "1. Age : 65 years and older •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "2. Marital status : Never married •", align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      { note: {label: "3. Marital status : Divorced, widowed •", align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Depressive') {
      annotations.push(
        {
       color: "#299438", note: {title: "1. Depressive Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
        note: {label: "2. Age : 15-17 years •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "3. Education : 9-11 grade •",align: "left"},
        x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      },
      {
        note: {label: "4. Marital status : Never married •", align: "left"},
        x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ ODD') {
      annotations.push(
        {
       color: "#7ECC49", note: {title: "ODD Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
        note: {label: "1. Employment : Not in labor force •",align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {note: {label: "2. Age : 15-17 years •", align: "left"},
   x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Other') {
      annotations.push(
        {
       color: "#AFB83B", note: {title: "Other Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
        {
        note: {label: "1. Marital status : Never married •", align: "left"},
        x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
         note: {label: "2. Education : More than 12 grade •",align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ PDD') {
      annotations.push(
        {
       color: "#FAD000", note: {title: "PDD Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {note: {label: "1. Age : 15-17 years •", align: "left"},
 x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Education : 9-11 grade •",align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Personality') {
      annotations.push(
        {
       color: "#FF9933",  note: {title: "Personality Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {        
        note: {label: "1. Marital status : Divorced, widowed •", align: "left"},
 x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Marital status : Never married •", align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '✪ Schizophrenia') {
      annotations.push(
        {
       color: "#DB4035",  note: {title: "Schizophrenia Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {        
        note: {label: "1. Ethnic : Puerto Rican ★",align: "left"},
 x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Region : Other jurisdictions ★ ", align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }, {note: {label: "3. Race : Other race/two or more races •", align: "left"},
   x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }

      if (entityName === '⊙ Trauma') {
      annotations.push(
        {
       color: "#B8255F",  note: {title: "Trauma Top Metrics" ,     align: "left"},
        x: 830,
        y:233,
        dy: 0, dx: 0,
        connector: null,  
      },
      {        
        note: {label: "1. Age : 15-17 years •", align: "left"},
       x: 830,
        y: 263,
        dy: 0, dx: 0,
        connector: null,  
      },
      {       
        note: {label: "2. Marital status : Never married •", align: "left"},
       x: 830,
             y: 283,
        dy: 0, dx: 0,
        connector: null,  
      }, { note: {label: "3. Education : 9-11 grade •",align: "left"},
   x: 830,
        y: 303,
        dy: 0, dx: 0,
        connector: null,  
      }); }


    const makeAnnotations = d3.annotation()
      .annotations(annotations)
    .type(d3.annotationLabel)
    .textWrap(300); 
  

    d3.select(".annotations").remove(); 
   

    svg.append("g")
      .attr("class", "annotations")
      .call(makeAnnotations);
  })
  .on("mouseout", function() {
    d3.select("#tooltip").classed("hidden", true);
    d3.selectAll('path.chord').transition("fadeOnArc")
      .style("opacity", opacityDefault);

  });

function fade(opacity) {
  return function(d, i) {
    svg.selectAll("path.chord")
      .filter(function(d) {
        return d.source.index !== i && d.target.index !== i && Names[d.source.index] !== "";
      })
      .transition("fadeOnArc")
      .style("opacity", opacity);
      
  };
  
} 
function startAngle(d) {
  return d.startAngle + offset;
}

function endAngle(d) {
  return d.endAngle + offset;
};




</script>
</body>
</html>
